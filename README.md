# 不屈日记

# 分布式事务

CAP定理
* Consistency(一致性)
* Avaiolability(可用性)
* Partition tolerance(分区容错性)在整个系统出现分区时，整个系统也要堆外提供服务

BASE理论
* Basically Available（基本可用）：分布式系统在出现故障时，允许部分可用性，即保证核心可用
* Soft State（软状态）：在一定时间内，允许出现中间状态，比如临时的不一致状态
* Eventually Consistent（最终一致性）：虽然无法保证强一致性，但是在软状态结束后，最终达到数据一致

Seata架构
* TC-事务协调者：维护全局和分支事物的状态，协调全局事务提交或回滚
* TM-事务管理器：定义全局事务的范围、开始全局事务、提交或回滚全局事务
* RM-资源管理器：管理分支事务处理的资源，与TC交谈以注册分支事务和报告分支事物的状态，并驱动分支事物的提交或回滚

Seata提供了四种分布式事务
* XA模式：强一致性分阶段事务模型，牺牲了一定的可用性，无业务侵入
* TCC模式：最终一致性的分阶段事务模型，有业务侵入
* AT模式：最终一致性的分阶段事务模式，无业务侵入，也是seata的默认模式
* SAGA模式：长事务模式，有业务侵入






























